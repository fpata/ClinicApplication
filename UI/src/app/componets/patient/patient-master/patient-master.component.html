<form class="was-validated">
  <div class="container-fluid">
    <!-- Desktop Navigation -->
    <div class="d-none d-md-block">
      <ul class="nav nav-tabs nav-fill mb-3" id="tbpatient" role="tablist">
        @if(showSearchTab) {
        <li class="nav-item" role="presentation">
          <button class="nav-link rounded-0 px-4 py-3" 
                  [class.active]="selectedTab === 'tbPatientSearch'"
                  id="tbPatientSearch-tab" 
                  data-bs-toggle="tab"
                  data-bs-target="#tbPatientSearch" 
                  type="button" 
                  role="tab"
                  (click)="tabSelectedEvent($event)">
            <i class="bi bi-search me-2"></i>Search
          </button>
        </li>
        }
        @if(showTabs) {
        <li class="nav-item" role="presentation">
          <button class="nav-link rounded-0 px-4 py-3" 
                  [class.active]="selectedTab === 'tbPatientVitals'"
                  id="tbPatientVitals-tab" 
                  data-bs-toggle="tab" 
                  data-bs-target="#tbPatientVitals"
                  type="button" 
                  role="tab" 
                  (click)="tabSelectedEvent($event)">
            <i class="bi bi-heart-pulse me-2"></i>Patient Vitals
          </button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbPatientHistory-tab" data-bs-toggle="tab" data-bs-target="#tbPatientHistory"
            type="button" role="tab" aria-controls="tbPatientHistory" aria-selected="false"
            (click)="tabSelectedEvent($event)">Patient History</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbPatientTreatment-tab" data-bs-toggle="tab" data-bs-target="#tbPatientTreatment"
            type="button" role="tab" aria-controls="tbPatientTreatment" aria-selected="false"
            (click)="tabSelectedEvent($event)">Patient Treatment</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbPatientAppointment-tab" data-bs-toggle="tab"
            data-bs-target="#tbPatientAppointment" type="button" role="tab" aria-controls="tbPatientAppointment"
            aria-selected="false" (click)="tabSelectedEvent($event)">Patient Appointment</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbPatientReports-tab" data-bs-toggle="tab" data-bs-target="#tbPatientReport"
            type="button" role="tab" aria-controls="tbPatientReport" aria-selected="false"
            (click)="tabSelectedEvent($event)">Patient Reports
            Documents</button>
        </li>
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbPreviousInfo-tab" data-bs-toggle="tab" data-bs-target="#tbPreviousInfo"
            type="button" role="tab" aria-controls="tbPreviousInfo" aria-selected="false"
            (click)="tabSelectedEvent($event)">Previous Treatments</button>
        </li>
        }
        @if(showQuickCreate) {
        <li class="nav-item" role="presentation">
          <button class="nav-link" id="tbQuickCreate-tab" data-bs-toggle="tab" data-bs-target="#tbQuickCreate"
            type="button" role="tab" aria-controls="tbQuickCreate" aria-selected="false"
            (click)="tabSelectedEvent($event)">Quick Create</button>
        </li>
        }
      </ul>
    </div>

    <!-- Mobile Navigation -->
    <div class="d-md-none mb-3">
      <div class="dropdown w-100">
        <button class="btn btn-secondary dropdown-toggle w-100 py-2" 
                type="button" 
                data-bs-toggle="dropdown" 
                aria-expanded="false">
          Patient Menu
        </button>
        <ul class="dropdown-menu w-100">
          @if(showSearchTab) {
            <li><button class="dropdown-item py-2" 
                        [class.active]="selectedTab === 'tbPatientSearch'"
                        (click)="tabSelectedEvent($event)">Search</button></li>
          }
          @if(showTabs) {
            <li><button class="dropdown-item py-2" 
                        [class.active]="selectedTab === 'tbPatientVitals'"
                        (click)="tabSelectedEvent($event)">Patient Vitals</button></li>
            <li>
              <a class="nav-link" id="tbPreviousInfo-tab1" data-bs-toggle="tab" data-bs-target="#tbPreviousInfo"
                aria-controls="tbPreviousInfo" aria-selected="false">Paient Previous Treatments</a>
            </li>
            <li>
              <a class="nav-link" id="tbPatientHistory-tab1" data-bs-toggle="tab" data-bs-target="#tbPatientHistory"
                aria-controls="tbPatientHistory" aria-selected="false">Patient History</a>
            </li>
            <li>
              <a class="nav-link" id="tbPatientTreatment-tab1" data-bs-toggle="tab" data-bs-target="#tbPatientTreatment"
                aria-controls="tbPatientTreatment" aria-selected="false">Patient Treatment</a>
            </li>
            <li>
              <a class="nav-link" id="tbPatientAppointment-tab1" data-bs-toggle="tab"
                data-bs-target="#tbPatientAppointment" aria-controls="tbPatientAppointment"
                aria-selected="false">Patient Appointment</a>
            </li>
            <li>
              <a class="nav-link" id="tbPatientReports-tab" data-bs-toggle="tab" data-bs-target="#tbPatientReport"
                aria-controls="tbPatientReport" aria-selected="false">Patient Reports
                Documents</a>
            </li>
            <li>
              <a class="dropdown-item" id="tbQuickCreate-tab1" data-bs-toggle="tab" data-bs-target="#tbQuickCreate"
                aria-controls="tbQuickCreate" aria-selected="false">Quick Create</a>
            </li>
            <li>
              <a class="dropdown-item" id="tbPreviousInfo-tab1" data-bs-toggle="tab" data-bs-target="#tbPreviousInfo"
                aria-controls="tbPreviousInfo" aria-selected="false">Previous Treatments</a>
            </li>
          }
        </ul>
      </div>
    </div>

    <!-- Tab Content -->
    <div class="tab-content shadow-sm rounded bg-white p-3" id="nav-tabContentPatientInfo">
      @if(showSearchTab) {
      <div class="tab-pane fade" 
           [class.show]="selectedTab === 'tbPatientSearch'"
           [class.active]="selectedTab === 'tbPatientSearch'"
           id="tbPatientSearch" 
           role="tabpanel">
        <app-patient-search></app-patient-search>
      </div>
      }
      @if(showTabs) {
      <div class="tab-pane fade" [class.show]="selectedTab === 'tbPatientVitals'"
        [class.active]="selectedTab === 'tbPatientVitals'"
        id="tbPatientVitals" role="tabpanel">
        <app-patient-vitals></app-patient-vitals>
      </div>
      <div class="tab-pane fade" id="tbPatientHistory" role="tabpanel" aria-labelledby="tbPatientHistory-tab">
        <app-patient-history></app-patient-history>
      </div>

      <div class="tab-pane fade" id="tbPatientTreatment" role="tabpanel" aria-labelledby="tbPatientTreatment-tab">
        <app-patient-treatment></app-patient-treatment>
      </div>

      <div class="tab-pane fade" id="tbPatientAppointment" role="tabpanel" aria-labelledby="tbPatientAppointment-tab">
        <app-patient-appointment></app-patient-appointment>
      </div>

      <div class="tab-pane fade" id="tbPatientReport" role="tabpanel" aria-labelledby="tbPatientReport-tab">
        <app-patient-report></app-patient-report>
      </div>
      <div class="tab-pane fade" id="tbPreviousInfo" role="tabpanel" aria-labelledby="tbPreviousInfo-tab">
        <app-patientcompletehistory></app-patientcompletehistory>
      </div>
      }
      @if(showQuickCreate) {
      <div class="tab-pane fade" id="tbQuickCreate" role="tabpanel" aria-labelledby="tbQuickCreate-tab">
        <app-patient-quick-create></app-patient-quick-create>
      </div>
      }
    </div>

    <!-- Action Buttons -->
    @if(!isSearchTabSelected) {
    <div class="row mt-4 g-3">
      <div class="col-md-3 col-6">
        <button type="button" 
                id="btnPatientSave" 
                class="btn btn-primary w-100"
                (click)="SavePatientInformation()">
          <i class="bi bi-save me-2"></i>Save
        </button>
      </div>
      <div class="col-md-3 col-6">
        <button type="button" 
                id="btnPatientClear" 
                class="btn btn-outline-secondary w-100"
                (click)="ClearPatientInformation()">
          <i class="bi bi-x-circle me-2"></i>Clear
        </button>
      </div>
      <div class="col-md-3 col-6">
        <button type="button" 
                id="btnPatientDelete" 
                class="btn btn-danger w-100"
                (click)="DeletePatientInformation()">
          <i class="bi bi-trash me-2"></i>Delete
        </button>
      </div>
      <div class="col-md-3 col-6">
        <button type="button" 
                id="btnPatientSearch" 
                class="btn btn-outline-primary w-100"
                (click)="SearchPatientInformation()">
          <i class="bi bi-search me-2"></i>Search
        </button>
      </div>
    </div>
    }
  </div>
</form>
<div class="rounded" style="border:0.5px solid lightblue;padding: 40px;">
  <div class="container-fluid">
    <div class="rounded" style="border:0.5px solid lightblue;padding: 40px;">
      <div class="row">
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchFirstName" class="form-label">First Name</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <input type="text" id="txtSearchFirstName" class="form-control" [(ngModel)]="this.searchPatient.FirstName"
            minlength="3" maxlength="25" (ngModelChange)="validateSearchInput()">
        </div>
        <div class="col-xs-12 col-sm-2 col-md-1">&nbsp;</div>
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchLastName" class="form-label">Last Name</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <input type="text" id="txtSearchLastName" class="form-control" [(ngModel)]="this.searchPatient.LastName"
            minlength="3" maxlength="25" (ngModelChange)="validateSearchInput()">
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchPhone" class="form-label">Phone</label>
        </div>
        <div class="ccol-xs-12 col-sm-5 col-md-3">
          <input type="text" id="txtSearchPhone" class="form-control" [(ngModel)]="this.searchPatient.PrimaryPhone"
            minlength="3" maxlength="25" (ngModelChange)="validateSearchInput()">
        </div>
        <div class="col-xs-12 col-sm-2 col-md-1">&nbsp;</div>
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchEmailAddress" class="form-label">Email Address</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <input type="text" id="txtSearchEmailAddress" class="form-control"
            [(ngModel)]="this.searchPatient.PrimaryEmail" minlength="3" maxlength="25"
            (ngModelChange)="validateSearchInput()">
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchUserID" class="form-label">User ID</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <input type="number" id="txtSearchUserID" class="form-control" [(ngModel)]="this.searchPatient.UserID">
        </div>
        <div class="col-xs-12 col-sm-2 col-md-1">&nbsp;</div>
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchCity" class="form-label">City</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <input type="text" id="txtSearchCity" class="form-control" [(ngModel)]="this.searchPatient.PermCity"
            minlength="3" maxlength="25" (ngModelChange)="validateSearchInput()">
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-xs-12 col-sm-5 col-md-2">
          <label for="txtSearchUserType" class="form-label">User Type</label>
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          <select id="txtSearchUserType" class="form-control" [(ngModel)]="searchPatient.UserType">
            <option [ngValue]="null">Select User Type</option>
            <option [ngValue]="1">Patient</option>
            <option [ngValue]="5">Admin</option>
            <option [ngValue]="2">Doctor</option>
            <option [ngValue]="3">Nurse</option>
            <option [ngValue]="4">Receptionist</option>
            <option [ngValue]="6">Technician</option>
          </select>
        </div>
        <div class="col-xs-12 col-sm-2 col-md-1">&nbsp;</div>
        <div class="col-xs-12 col-sm-5 col-md-2">
          &nbsp;
        </div>
        <div class="col-xs-12 col-sm-5 col-md-3">
          &nbsp;
        </div>
      </div>
      <br />
      <div class="row">
        <div class="col-xs-12 col-sm-6 col-md-6 text-center">
          <button type="button" id="btnSearchUser" class="btn btn-primary" (click)="SearchUser()">Search User</button>
        </div>
        <div class="col-xs-12 col-sm-6 col-md-6 text-center">
          <button type="button" id="btnClearUserSearch" class="btn btn-secondary" (click)="clearSearch()">Clear
            Search</button>
        </div>
      </div>
      <br>
      @if(searchLengthConstraintError) {
      <div class="row">
        <div class="col-12" style="background-color: cornflowerblue;color: white"><label class="align-center">Search
            Error:
            Atleast 3 characters should be entered in any one field</label></div>
      </div>
      }
    </div>
    <br />
    <div class="rounded" style="border:0.5px solid lightblue;padding: 40px;">
      <div class="row">
        <div class="col-12" style="background-color: cornflowerblue;color: white">
          <label class="align-center">Search Results: {{searchResult?.TotalCount}} record(s) found</label>
        </div>
      </div>
      <!--Desktop view table-->
      <div class="row d-none d-md-flex">
        <div class="col-12">
          <div class="table-responsive">
            <table class="table table-striped table-bordered" style="color: black;">
              <thead>
                <th>ID</th>
                <th>First Name</th>
                <th>Last Name</th>
                <th>City</th>
                <th>Email</th>
                <th>Phone Number</th>
              </thead>
              <tbody>
                @for (result of searchResult.Users; track $index){
                <tr>
                  <td><a style="text-decoration: underline solid blue 1px;cursor:pointer;"
                      (click)="OnUserIdClick(result.UserID)">{{result.UserID}}</a></td>
                  <td>{{result.FirstName}}</td>
                  <td>{{result.LastName}}</td>
                  <td>{{result.PermCity}}</td>
                  <td>{{result.PrimaryEmail}}</td>
                  <td>{{result.PrimaryPhone}}</td>
                </tr>
                }
                @if (searchResult == undefined && searchResult.Users == undefined && searchResult.Users?.length == 0 &&
                clearSearchClicked==false){
                <tr>
                  <td colspan="6"><label id="lblNoRecordsError">No record found matching the search criteria</label>
                  </td>
                </tr>
                }
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <br />
      <!--Mobile Version Table-->
      <div class="d-block d-md-none">
        @for (result of searchResult.Users; track $index){
        <div class="card mb-3">
          <div class="card-body">
            <div class="row g-2">
              <div class="col-4 fw-bold">ID:</div>
              <div class="col-8">
                <a class="text-primary" style="cursor:pointer;" (click)="OnUserIdClick(result.UserID)">{{result.UserID}}</a>
              </div>
              
              <div class="col-4 fw-bold">Name:</div>
              <div class="col-8">{{result.FirstName}} {{result.LastName}}</div>
              
              <div class="col-4 fw-bold">City:</div>
              <div class="col-8">{{result.PermCity}}</div>
              
              <div class="col-4 fw-bold">Email:</div>
              <div class="col-8">{{result.PrimaryEmail}}</div>
              
              <div class="col-4 fw-bold">Phone:</div>
              <div class="col-8">{{result.PrimaryPhone}}</div>
            </div>
          </div>
        </div>
        }
        
        @if (searchResult == undefined && searchResult.Users == undefined && searchResult.Users?.length == 0 && clearSearchClicked==false){
        <div class="alert alert-info text-center">
          <label id="lblNoRecordsError">No record found matching the search criteria</label>
        </div>
        }
      </div>
      <div class="row">
        <div class="col-12">
          @if(searchResult?.Users?.length > 0) {
          <app-paging [totalItems]="totalItems" [pageSize]="pageSize" [currentPage]="currentPage"
            (pageChange)="onPageChange($event)"> </app-paging>
          }
        </div>
      </div>
    </div>
    <br />
    <div class="rounded" style="border:0.5px solid lightblue;padding: 40px;">
      <div class="row">
        <div class="col" style="text-align: center;">
          <button type="button" id="btnNewUser" class="btn btn-primary" style="width: 35%;" (click)="AddNewUser()">New
            User</button>
        </div>
        <div class="col" style="text-align: center;">
          <button type="button" id="btnQuickCreateUser" class="btn btn-secondary" style="width: 35%;"
            (click)="QuickCreateUser()">Quick Create User</button>
        </div>
      </div>
    </div>
    <br />

    <br />